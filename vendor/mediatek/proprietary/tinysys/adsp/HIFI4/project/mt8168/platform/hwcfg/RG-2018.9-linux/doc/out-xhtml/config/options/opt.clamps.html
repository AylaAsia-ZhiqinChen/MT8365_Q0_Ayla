<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="tconcept"/>
<meta name="DC.Title" content="CLAMPS Option"/>
<meta name="abstract" content="Signed CLAMPS instruction (for saturating arithmetic)"/>
<meta name="description" content="Signed CLAMPS instruction (for saturating arithmetic)"/>
<meta name="DC.Relation" scheme="URI" content="../../config/nodes/g_muldiv.html"/>
<meta name="DC.Relation" scheme="URI" content="../../config/options/opt.mul16.html"/>
<meta name="DC.Relation" scheme="URI" content="../../config/options/opt.div32Int.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="opt-clamps"/>
<link rel="stylesheet" type="text/css" href="../../commonltr.css"/>
<link rel="stylesheet" type="text/css" href="../../cadence.css"/>
<title>CLAMPS Option</title>
</head>
<body id="opt-clamps">


    <h1 class="title topictitle1">CLAMPS Option</h1>

    
    <div class="body conbody"><p class="shortdesc">Signed CLAMPS instruction (for saturating arithmetic)</p>

        <dl class="dl">
            
                <dt class="dt dlterm">CLAMPS option</dt>

                <dd class="dd"><span class="ph">Selected</span></dd>

            
        </dl>

        <p class="p">The CLAMPS instruction tests whether a signed integral variable fits into a fixed number
            of bits ranging from 7 to 22. If so, the input value is returned. If not, the largest
            value with the same sign that does fit into the fixed number of bits is returned. This
            option is particularly useful for implementing saturating arithmetic. The compiler will
            automatically infer this instruction from the pattern.</p>

        <p class="p"><samp class="ph codeph">x = min(max((x,-2<sup class="ph sup">n</sup>),2<sup class="ph sup">n</sup>-1))=</samp></p>

        <p class="p">Min and max are first inferred from standard C conditional operations.</p>

        <p class="p">Consider the following example:</p>

        <pre class="pre codeblock">if (a &lt; -1024) {
    result = -1024;
} else if (a &gt; 1023) {
    result = 1023;
} else {
    result = a;
}</pre>

        <p class="p">When compiled with optimization, the compiler will generate a CLAMPS instruction with an
            immediate value of 10.</p>

    </div>

<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../config/nodes/g_muldiv.html" title="The Xtensa Processor Generator offers a series of optional arithmetic configuration options.">Arithmetic Instruction Options</a></div>
<div class="previouslink"><strong>Previous topic:</strong> <a class="link" href="../../config/options/opt.mul16.html" title="16-bit multiplier (signed/unsigned)">MUL16 Option</a></div>
<div class="nextlink"><strong>Next topic:</strong> <a class="link" href="../../config/options/opt.div32Int.html" title="32-bit integer divider that completes in a variable number of cycles depending on the operands">32-Bit Integer Divider</a></div>
</div>
</div>

</body>
</html>